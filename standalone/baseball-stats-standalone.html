<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Stats Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Icon components (simplified)
        const Icon = ({ name, className = "w-6 h-6" }) => {
            const icons = {
                chart: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>,
                plus: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>,
                user: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>,
                trending: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>,
                trash: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
                share: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" /></svg>,
                camera: <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
            };
            return icons[name] || icons.chart;
        };
        
        function App() {
            const [view, setView] = useState('login');
            const [user, setUser] = useState(null);
            const [teams, setTeams] = useState([]);
            const [players, setPlayers] = useState([]);
            const [games, setGames] = useState([]);
            
            // Load from localStorage
            useEffect(() => {
                const savedUser = localStorage.getItem('user');
                const savedTeams = localStorage.getItem('teams');
                const savedPlayers = localStorage.getItem('players');
                const savedGames = localStorage.getItem('games');
                
                if (savedUser) {
                    setUser(JSON.parse(savedUser));
                    setView('dashboard');
                }
                if (savedTeams) setTeams(JSON.parse(savedTeams));
                if (savedPlayers) setPlayers(JSON.parse(savedPlayers));
                if (savedGames) setGames(JSON.parse(savedGames));
            }, []);
            
            // Save to localStorage
            useEffect(() => {
                if (user) localStorage.setItem('user', JSON.stringify(user));
                localStorage.setItem('teams', JSON.stringify(teams));
                localStorage.setItem('players', JSON.stringify(players));
                localStorage.setItem('games', JSON.stringify(games));
            }, [user, teams, players, games]);
            
            const [form, setForm] = useState({
                email: '', password: '', name: '',
                teamName: '', league: '', season: new Date().getFullYear(),
                playerName: '', number: '', position: '', teamId: '',
                playerId: '', date: new Date().toISOString().split('T')[0],
                opponent: '', atBats: 0, hits: 0, runs: 0, rbis: 0
            });
            
            const handleSignup = () => {
                if (!form.email || !form.name) return alert('Fill all fields');
                const newUser = { id: Date.now(), email: form.email, name: form.name };
                setUser(newUser);
                setView('dashboard');
            };
            
            const handleLogin = () => {
                setUser({ id: 1, email: form.email, name: 'Demo User' });
                setView('dashboard');
            };
            
            const addTeam = () => {
                if (!form.teamName || !form.league) return alert('Fill all fields');
                setTeams([...teams, {
                    id: Date.now(),
                    name: form.teamName,
                    league: form.league,
                    season: form.season,
                    userId: user.id
                }]);
                setView('dashboard');
            };
            
            const addPlayer = () => {
                if (!form.playerName || !form.number || !form.teamId) return alert('Fill all fields');
                setPlayers([...players, {
                    id: Date.now(),
                    name: form.playerName,
                    number: form.number,
                    position: form.position,
                    teamId: form.teamId
                }]);
                setView('dashboard');
            };
            
            const addGame = () => {
                if (!form.playerId || !form.opponent) return alert('Fill all fields');
                setGames([...games, {
                    id: Date.now(),
                    playerId: form.playerId,
                    date: form.date,
                    opponent: form.opponent,
                    atBats: Number(form.atBats),
                    hits: Number(form.hits),
                    runs: Number(form.runs),
                    rbis: Number(form.rbis)
                }]);
                setView('dashboard');
            };
            
            const calcStats = (playerId) => {
                const playerGames = games.filter(g => g.playerId == playerId);
                if (playerGames.length === 0) return null;
                const totals = playerGames.reduce((acc, g) => ({
                    atBats: acc.atBats + g.atBats,
                    hits: acc.hits + g.hits,
                    runs: acc.runs + g.runs,
                    rbis: acc.rbis + g.rbis
                }), { atBats: 0, hits: 0, runs: 0, rbis: 0 });
                const avg = totals.atBats > 0 ? (totals.hits / totals.atBats).toFixed(3) : '.000';
                return { ...totals, avg, games: playerGames.length };
            };
            
            if (!user) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-600 to-blue-700 flex items-center justify-center p-4">
                        <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md">
                            <div className="text-center mb-8">
                                <Icon name="chart" className="w-16 h-16 mx-auto text-green-600 mb-4" />
                                <h1 className="text-3xl font-bold text-gray-800">Baseball Stats Tracker</h1>
                                <p className="text-gray-600 mt-2">Track player and team statistics</p>
                            </div>
                            <div className="space-y-4">
                                <input
                                    type="email"
                                    placeholder="Email"
                                    value={form.email}
                                    onChange={(e) => setForm({...form, email: e.target.value})}
                                    className="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                />
                                <input
                                    type="password"
                                    placeholder="Password"
                                    value={form.password}
                                    onChange={(e) => setForm({...form, password: e.target.value})}
                                    className="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                />
                                <input
                                    type="text"
                                    placeholder="Full Name"
                                    value={form.name}
                                    onChange={(e) => setForm({...form, name: e.target.value})}
                                    className="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-green-500"
                                />
                                <div className="flex gap-3">
                                    <button onClick={handleLogin} className="flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-semibold">
                                        Login
                                    </button>
                                    <button onClick={handleSignup} className="flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-semibold">
                                        Sign Up
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            const userTeams = teams.filter(t => t.userId === user.id);
            
            if (view === 'createTeam') {
                return (
                    <div className="min-h-screen bg-gray-50 p-6">
                        <div className="max-w-2xl mx-auto">
                            <button onClick={() => setView('dashboard')} className="mb-4 text-blue-600">← Back</button>
                            <div className="bg-white rounded-lg shadow p-8">
                                <h2 className="text-2xl font-bold mb-6">Create Team</h2>
                                <div className="space-y-4">
                                    <input type="text" placeholder="Team Name" value={form.teamName} onChange={(e) => setForm({...form, teamName: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <input type="text" placeholder="League" value={form.league} onChange={(e) => setForm({...form, league: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <input type="number" placeholder="Season" value={form.season} onChange={(e) => setForm({...form, season: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <button onClick={addTeam} className="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700">Create Team</button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            if (view === 'createPlayer') {
                return (
                    <div className="min-h-screen bg-gray-50 p-6">
                        <div className="max-w-2xl mx-auto">
                            <button onClick={() => setView('dashboard')} className="mb-4 text-blue-600">← Back</button>
                            <div className="bg-white rounded-lg shadow p-8">
                                <h2 className="text-2xl font-bold mb-6">Add Player</h2>
                                <div className="space-y-4">
                                    <input type="text" placeholder="Player Name" value={form.playerName} onChange={(e) => setForm({...form, playerName: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <input type="text" placeholder="Number" value={form.number} onChange={(e) => setForm({...form, number: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <input type="text" placeholder="Position" value={form.position} onChange={(e) => setForm({...form, position: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <select value={form.teamId} onChange={(e) => setForm({...form, teamId: e.target.value})} className="w-full px-4 py-3 border rounded-lg">
                                        <option value="">Select Team</option>
                                        {userTeams.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}
                                    </select>
                                    <button onClick={addPlayer} className="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700">Add Player</button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            if (view === 'addGame') {
                const allPlayers = players.filter(p => userTeams.find(t => t.id == p.teamId));
                return (
                    <div className="min-h-screen bg-gray-50 p-6">
                        <div className="max-w-2xl mx-auto">
                            <button onClick={() => setView('dashboard')} className="mb-4 text-blue-600">← Back</button>
                            <div className="bg-white rounded-lg shadow p-8">
                                <h2 className="text-2xl font-bold mb-6">Record Game</h2>
                                <div className="space-y-4">
                                    <select value={form.playerId} onChange={(e) => setForm({...form, playerId: e.target.value})} className="w-full px-4 py-3 border rounded-lg">
                                        <option value="">Select Player</option>
                                        {allPlayers.map(p => <option key={p.id} value={p.id}>{p.name} - #{p.number}</option>)}
                                    </select>
                                    <input type="date" value={form.date} onChange={(e) => setForm({...form, date: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <input type="text" placeholder="Opponent" value={form.opponent} onChange={(e) => setForm({...form, opponent: e.target.value})} className="w-full px-4 py-3 border rounded-lg" />
                                    <div className="grid grid-cols-2 gap-4">
                                        <input type="number" placeholder="At Bats" value={form.atBats} onChange={(e) => setForm({...form, atBats: e.target.value})} className="px-4 py-3 border rounded-lg" />
                                        <input type="number" placeholder="Hits" value={form.hits} onChange={(e) => setForm({...form, hits: e.target.value})} className="px-4 py-3 border rounded-lg" />
                                        <input type="number" placeholder="Runs" value={form.runs} onChange={(e) => setForm({...form, runs: e.target.value})} className="px-4 py-3 border rounded-lg" />
                                        <input type="number" placeholder="RBIs" value={form.rbis} onChange={(e) => setForm({...form, rbis: e.target.value})} className="px-4 py-3 border rounded-lg" />
                                    </div>
                                    <button onClick={addGame} className="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700">Record Stats</button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="min-h-screen bg-gray-50">
                    <nav className="bg-white shadow p-4">
                        <div className="max-w-7xl mx-auto flex justify-between items-center">
                            <div>
                                <h2 className="font-bold text-lg">{user.name}</h2>
                                <p className="text-sm text-gray-600">{user.email}</p>
                            </div>
                            <button onClick={() => { setUser(null); localStorage.clear(); }} className="px-4 py-2 bg-red-500 text-white rounded-lg">Logout</button>
                        </div>
                    </nav>
                    
                    <div className="max-w-7xl mx-auto p-6">
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                            <button onClick={() => setView('createTeam')} className="bg-green-600 text-white p-6 rounded-lg hover:bg-green-700 flex items-center justify-center gap-2">
                                <Icon name="plus" /> Create Team
                            </button>
                            <button onClick={() => setView('createPlayer')} className="bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2">
                                <Icon name="user" /> Add Player
                            </button>
                            <button onClick={() => setView('addGame')} className="bg-purple-600 text-white p-6 rounded-lg hover:bg-purple-700 flex items-center justify-center gap-2">
                                <Icon name="trending" /> Record Game
                            </button>
                        </div>
                        
                        <div className="bg-white rounded-lg shadow p-6">
                            <h3 className="text-2xl font-bold mb-4">My Teams</h3>
                            {userTeams.length === 0 ? (
                                <p className="text-gray-600">No teams yet. Create your first team!</p>
                            ) : (
                                <div className="space-y-4">
                                    {userTeams.map(team => {
                                        const teamPlayers = players.filter(p => p.teamId == team.id);
                                        return (
                                            <div key={team.id} className="border rounded-lg p-4">
                                                <div className="flex justify-between mb-3">
                                                    <div>
                                                        <h4 className="text-xl font-bold">{team.name}</h4>
                                                        <p className="text-gray-600">{team.league} - {team.season}</p>
                                                    </div>
                                                    <button onClick={() => { setTeams(teams.filter(t => t.id !== team.id)); setPlayers(players.filter(p => p.teamId !== team.id)); }} className="text-red-500 hover:text-red-700">
                                                        <Icon name="trash" className="w-5 h-5" />
                                                    </button>
                                                </div>
                                                <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                                    {teamPlayers.map(player => {
                                                        const stats = calcStats(player.id);
                                                        return (
                                                            <div key={player.id} className="bg-gray-50 rounded-lg p-3 border">
                                                                <div className="flex items-center gap-3 mb-2">
                                                                    <div className="w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center font-bold">
                                                                        #{player.number}
                                                                    </div>
                                                                    <div>
                                                                        <p className="font-semibold">{player.name}</p>
                                                                        <p className="text-sm text-gray-600">{player.position}</p>
                                                                    </div>
                                                                </div>
                                                                {stats && (
                                                                    <div className="text-sm text-gray-700">
                                                                        <p>AVG: {stats.avg}</p>
                                                                        <p>H: {stats.hits} | R: {stats.runs} | RBI: {stats.rbis}</p>
                                                                        <p>Games: {stats.games}</p>
                                                                    </div>
                                                                )}
                                                                <button onClick={() => setPlayers(players.filter(p => p.id !== player.id))} className="mt-2 text-xs px-2 py-1 bg-red-500 text-white rounded w-full">Delete</button>
                                                            </div>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }
        
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>